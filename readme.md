![https://github.com/alex-crs/NetSpectator/blob/master/spider.png](https://raw.githubusercontent.com/alex-crs/NetSpectator/master/spider.png)

#Net_spectator

Представляем вашему вниманию - **#Net_Spectator**! Это легковесный и многофункциональный помощник системного
администратора
для небольшой организации. Он позволяет своевременно оповещать администраторов об
инцидентах на предприятии, автоматизировать рутинные процессы инвентаризации оборудования, а также регистрировать
обращения пользователей для проведения обслуживания рабочих станций.

Что он умеет:

1. Контролировать доступность серверов и сетевых устройств;
2. Собирать информацию о техническом состоянии клиентов;
3. Управлять подключениями клиентов (авторизация, включение и отключение клиентов);
4. Сканировать локальную сеть с целью обнаружения узлов для наблюдения;
5. Отображать состояние клиентов как через командную строку, так и на WEB-портале;
6. Проводить инвентаризацию оборудования;
7. Осуществлять контроль заявок на обслуживание;
8. Осуществлять как локальное так и серверное логирование;

Технологии:

Приложение представляет собой мультисервисную архитектуру, в основе которой лежат 2 мощных фреймворка: Netty и Spring. При выборе архитектуры наша команда руководствовалась в первую очередь гибкостью и масштабируемостью принятых решений.

Архитектура приложения:
1. Frameworks:
   - Netty;
   - Spring (boot, cloud);
2. Базы данных:
   - PostgreSQL;
   - MongoDB;
3. AMQP брокер сообщений:
   - RabbitMQ;
4. Управление авторизацией пользователей:
   - Keycloak;
5. Frontend:
   - Angular;
   - Java script;
6. WEB-сервер:
   - Tomcat;

7. Платформа для запуска приложения:

   - Java 11;
   - Docker;

Описание модулей системы:

1. **Client** - самостоятельное мультиплатформенное приложение 
осуществляющее подключение к серверу с целью передачи технического состояния рабочей
станции (или сервера). Клиент с заданной периодичностью передает информацию о рабочей станции/сервера 
(температура CPU, состояние HDD, RAM) на сервер.

        Для Запуска приложения необходимо
        - Установить Java SE версии 11;
        - Сконфигурировать файл _client.properties_;
        - Запустить файл _"Client.jar"_ от имени администратора.

    После запуска клиент автоматически соединяется с сервером по заданным в _client.properties_ параметрам и в случае успешной авторизации
по публичному ключу начинает передавать данные. Клиент может работать в двух режимах "Интерактивном" и "Автоматическом".
- _интерактивный режим_ - клиент запускается в качестве консоли для удаленного администрирования сервера клиентов. 
 В этом режиме в случае успешной авторизации администратору системы доступно:
  - получение списка всех подключенных клиентов;
  - отключение клиента от сервера и запрет на подключение определенных клиентов (черный список);
  - поиск сетевых устройств в сети и добавление их в список отслеживаемых;
  - включение/отключение режима отслеживания;
  - отключение сервера.
- _автоматический режим_ - клиент подключается к серверу и начинает в автоматическом режиме отправлять информацию о своем 
состоянии.

2. **DirServer** - интегрируемая библиотека, которая состоит из 3х компонентов:

        - ClientListenersStarter - запускает слушатель клиентов;
        - ClientListenersDataBus - шина обмена для управления слушателем;
        - NodeListener - управляет сетевыми узлами (добавление/удаление/сканирование узлов, включение/отключение опроса);

3. **GatewayService** - шлюз коммутации/перенаправления запросов пользователя. Осуществляет валидацию токена запроса.


4. **InventoryService** - сервис инвентаризации оборудования. Позволяет управлять оборудованием внутри организации.
Основной функционал:

   - отображает все устройства предприятия;
   - добавляет/удаляет/списывает устройства;
   - отображает связанные с устройствами события;
   - отображает детальную информацию об устройствах;
   - позволяет из детальной информации об устройстве перейти в связанные с этим устройством события;
   - уведомляет ответственных пользователей о событиях связанных с изменением состояния оборудования.


5. **LoggerService** - сервис логирования событий. Осуществляет прием логов посредством прослушивания очереди RabbitMQ
и последующей записи в базу MongoDB.


6. **NotificationService** - сервис уведомлений пользователей. Принимает уведомления о событиях и в зависимости от типа события
определяет группу пользователей, назначенных на получение уведомлений по данному событию. Уведомление о событиях направляются
посредством встроенного почтового клиента.


7. **RequestsService** - сервис по управлению заявками (инцидентами) на предприятии. Основной функционал:
   - позволяет пользователям и администраторам создавать заявки;
   - позволяет администраторам управлять заявками (назначать ответственных, закрывать заявки);
   - позволяет видеть список заявок как отдельно пользователей так и все заявки в режиме администратора;


8. **UserManagementService** - прокси-сервис возвращающий по запросу списки пользователей, а также детальную информацию о них.
Осуществляет взаимодействие с keycloak (получает информацию о пользователях).


9. **WebDeviceService** - сервис управления клиентами и узлами. Основной функционал:
   - отображает информацию о состоянии клиентов;
   - управляет клиентами;
   - управляет отслеживанием сетевых узлов (добавляет и исключает отслеживаемые узлы);
   - отображает журнал изменения состояния клиентов;
   - управляет логированием событий (задает граничные параметры отслеживания);
   - управляет уведомлениями по событиям (кому, что отправлять);


10. **WebPageService** - возвращает WEB-страницы пользователю, одновременно с сервисом стартует контейнер tomcat.  